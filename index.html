<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI æ™ºèƒ½åŠ©æ‰‹ - å®Œå…¨ä¼˜åŒ–ç‰ˆ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700;800&family=Caveat:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* æŸ”å’Œç²‰å½©è‰²ç³» - ä¼˜åŒ–ç‰ˆ */
            --bg-primary: #FDF6F0;
            --bg-secondary: #FEF9F5;
            --bg-tertiary: #F5F3FF;

            /* âœ… ä¼˜åŒ–1: æå‡æ–‡å­—å¯¹æ¯”åº¦è‡³ WCAG AA æ ‡å‡† */
            --text-primary: #3E3848;
            --text-secondary: #5E5670;  /* ä» #7A7180 åŠ æ·±ï¼Œå¯¹æ¯”åº¦ 5.2:1 */
            --text-tertiary: #9A8FA0;  /* ä» #A89FA8 åŠ æ·± */

            /* å¼ºè°ƒè‰² - æŸ”å’Œç²‰å½© */
            --accent-mint: #C5E8D0;
            --accent-peach: #FFD4C2;
            --accent-lavender: #E2D4F0;
            --accent-primary: #D4B8E8;

            /* âœ… ä¼˜åŒ–2: æ›´ä¸°å¯Œçš„æ¸å˜å±‚æ¬¡ */
            --gradient-gentle: linear-gradient(135deg,
                #C5E8D0 0%,
                #DDE8D8 25%,
                #FFE5D8 50%,
                #FFD4C2 75%,
                #E8C8D8 100%
            );
            --gradient-subtle: linear-gradient(90deg, rgba(197, 232, 208, 0.3), rgba(255, 212, 194, 0.3));

            /* âœ… ä¼˜åŒ–3: åŠ å¼ºæ°”æ³¡è¾¹æ¡† */
            --bubble-user: #E8D5E0;
            --bubble-ai: #FFFFFF;
            --bubble-border: rgba(212, 184, 232, 0.4);  /* ä» 0.2 åŠ æ·±åˆ° 0.4 */
            --bubble-border-strong: rgba(212, 184, 232, 0.5);

            /* âœ… ä¼˜åŒ–4: å¤šå±‚é˜´å½±å¢åŠ æ·±åº¦æ„Ÿ */
            --shadow-soft:
                0 1px 2px rgba(74, 67, 88, 0.08),
                0 2px 8px rgba(74, 67, 88, 0.06);
            --shadow-medium:
                0 2px 4px rgba(74, 67, 88, 0.08),
                0 4px 16px rgba(74, 67, 88, 0.06),
                0 8px 32px rgba(74, 67, 88, 0.04);
            --shadow-elevated:
                0 4px 8px rgba(74, 67, 88, 0.08),
                0 8px 24px rgba(74, 67, 88, 0.06),
                0 16px 48px rgba(74, 67, 88, 0.04),
                0 32px 64px rgba(74, 67, 88, 0.02);
            --avatar-glow:
                0 8px 24px rgba(212, 184, 232, 0.15),
                0 0 0 1px rgba(212, 184, 232, 0.2);

            /* çŠ¶æ€é¢œè‰² - æ›´é²œè‰³ */
            --status-online: #4CAF50;  /* ä» #68D491 æ”¹ä¸ºæ›´é²œè‰³çš„ç»¿è‰² */

            /* é—´è· */
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 12px;
            --spacing-lg: 20px;
            --spacing-xl: 32px;
            --spacing-2xl: 48px;

            /* å­—ä½“ - æ·»åŠ  emoji æ”¯æŒ */
            --font-main: 'Quicksand', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans SC', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
            --font-emoji: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji', serif;  /* emoji ä¸“ç”¨å­—ä½“ */
            --font-hand: 'Caveat', cursive;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: var(--font-main);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-weight: 500;
            font-size: 15px;
            line-height: 1.7;
            letter-spacing: 0.01em;
            -webkit-font-smoothing: antialiased;
            position: relative;
        }

        /* ä¸ºæ‰€æœ‰ emoji å…ƒç´ æ·»åŠ ä¸“ç”¨å­—ä½“ */
        .emoji {
            font-family: var(--font-emoji);
            font-style: normal;
        }

        /* ===== é¡¶éƒ¨è™šæ‹Ÿå½¢è±¡æ  - ä¼˜åŒ– ===== */
        .top-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 64px;
            background: rgba(253, 246, 240, 0.98);  /* ä» 0.95 æé«˜ */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1.5px solid var(--bubble-border);  /* ä» 1px åŠ æ·± */
            box-shadow: 0 2px 8px rgba(74, 67, 88, 0.04);  /* âœ… æ·»åŠ å¾®å¦™é˜´å½± */
            display: flex;
            align-items: center;
            padding: 0 var(--spacing-lg);
            z-index: 100;
            transition: all 0.3s ease;
        }

        .avatar-container {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            cursor: pointer;
            transition: all 0.3s ease;
            padding: var(--spacing-sm);
            border-radius: 12px;
            position: relative;
        }

        .avatar-container:hover {
            background: rgba(212, 184, 232, 0.1);
        }

        /* âœ… æ·»åŠ å±•å¼€æç¤º */
        .avatar-container::after {
            content: 'â–¼';
            font-size: 8px;
            color: var(--text-tertiary);
            margin-left: 4px;
            transition: transform 0.3s ease;
        }

        .avatar-selector.active ~ .top-bar .avatar-container::after,
        .avatar-container.expanded::after {
            transform: rotate(180deg);
        }

        /* é¡¶éƒ¨å°å¤´åƒ */
        .avatar-small-top {
            width: 40px;
            height: 40px;
            background: var(--gradient-gentle);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-family: var(--font-emoji);  /* ç¡®ä¿ä½¿ç”¨ emoji å­—ä½“ */
            box-shadow: var(--shadow-soft);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .avatar-small-top .emoji {
            font-family: var(--font-emoji);
            font-style: normal;
        }

        /* çŠ¶æ€æŒ‡ç¤ºå™¨ - æ›´é²œè‰³ */
        .status-indicator {
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 12px;
            height: 12px;
            background: var(--status-online);
            border: 2px solid var(--bg-primary);
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.15);
                opacity: 0.85;
            }
        }

        /* è™šæ‹Ÿå½¢è±¡ä¿¡æ¯ - âœ… ä¼˜åŒ–å±‚æ¬¡ */
        .avatar-info {
            display: flex;
            flex-direction: column;
        }

        .avatar-name {
            font-size: 16px;  /* ä» 15px å¢å¤§ */
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.02em;  /* ä» -0.01em å¢å¼º */
            line-height: 1.2;
        }

        .avatar-status {
            font-size: 11px;  /* ä» 12px å‡å° */
            color: var(--text-tertiary);
            font-weight: 600;  /* ä» 500 å¢åŠ  */
            text-transform: uppercase;  /* âœ… å¤§å†™æ›´æ­£å¼ */
            letter-spacing: 0.05em;  /* âœ… å­—é—´è·æ›´å®½ */
        }

        /* å¤´åƒé€‰æ‹©å™¨ */
        .avatar-selector {
            display: none;
            position: fixed;
            top: 70px;
            left: var(--spacing-lg);
            background: var(--bg-secondary);
            border: 1.5px solid var(--bubble-border-strong);  /* âœ… åŠ æ·±è¾¹æ¡† */
            border-radius: 16px;
            padding: var(--spacing-md);
            box-shadow: var(--shadow-elevated);
            z-index: 101;
            min-width: 200px;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .avatar-selector.active {
            display: block;
        }

        .avatar-option {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .avatar-option:hover {
            background: var(--bg-tertiary);
        }

        .avatar-option img,
        .avatar-option .avatar-preview {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .avatar-option span {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* ===== åº”ç”¨å®¹å™¨ ===== */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            max-width: 480px;
            margin: 0 auto;
            position: relative;
            background: transparent;
            padding-top: 64px;
        }

        /* æ¶ˆæ¯å®¹å™¨ */
        .messages-container {
            flex: 1;
            overflow-y: auto;
            overflow-x: visible;  /* æ”¹ä¸º visibleï¼Œé¿å…æ¨ªå‘æˆªæ–­ */
            padding: var(--spacing-lg);
            padding-bottom: var(--spacing-2xl);
            display: flex;
            flex-direction: column;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            position: relative;
        }

        /* âœ… ä¼˜åŒ–10: ç©ºçŠ¶æ€è£…é¥° */
        .empty-state-decoration {
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 0;
            opacity: 0.15;
        }

        .floating-icon {
            position: absolute;
            font-size: 24px;
            animation: floatIcon 6s ease-in-out infinite;
        }

        @keyframes floatIcon {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(10deg); }
        }

        .floating-icon .emoji {
            font-family: var(--font-emoji);
            font-style: normal;
        }

        /* æœºå™¨äººæ¬¢è¿ç•Œé¢ */
        .robot-welcome {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            padding: var(--spacing-xl) 0;
            animation: fadeInUp 0.8s ease-out;
            position: relative;
            z-index: 1;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* æ¬¢è¿ç•Œé¢çš„è™šæ‹Ÿå½¢è±¡å®¹å™¨ */
        .welcome-avatar-container {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
            width: 100%;
        }

        /* âœ… ä¼˜åŒ–5: å¤§å‹è™šæ‹Ÿå½¢è±¡ - å¢å¼ºè§†è§‰ç„¦ç‚¹ */
        .robot-avatar-large {
            width: 100px;
            height: 100px;
            background: var(--gradient-gentle);
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            position: relative;
            flex-shrink: 0;
            overflow: hidden;
            /* âœ… å‘¼å¸å…‰æ™•æ•ˆæœ */
            box-shadow: var(--avatar-glow);
            animation: gentleGlow 3s ease-in-out infinite;
        }

        @keyframes gentleGlow {
            0%, 100% {
                box-shadow:
                    0 8px 24px rgba(212, 184, 232, 0.15),
                    0 0 0 1px rgba(212, 184, 232, 0.2);
            }
            50% {
                box-shadow:
                    0 8px 32px rgba(212, 184, 232, 0.2),
                    0 0 0 1px rgba(212, 184, 232, 0.3),
                    0 0 80px rgba(212, 184, 232, 0.15);
            }
        }

        /* 3Dæ¨¡å‹/Lottieå ä½å®¹å™¨ */
        .avatar-3d-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gradient-gentle);
            position: relative;
        }

        /* æœªæ¥æ”¾ç½®3Dæ¨¡å‹çš„å®¹å™¨ */
        .avatar-3d-model {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        /* âœ… ä¼˜åŒ–8: è™šæ‹Ÿå½¢è±¡çœ¨çœ¼åŠ¨ç”» */
        .avatar-placeholder {
            font-size: 48px;
            font-family: var(--font-emoji);  /* ç¡®ä¿ä½¿ç”¨ emoji å­—ä½“ */
            animation: float 3s ease-in-out infinite,
                       blink 4s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes blink {
            0%, 48%, 52%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(0.1); }
        }

        /* æ¬¢è¿æ–‡å­— - âœ… ä¼˜åŒ–æ’ç‰ˆ */
        .welcome-text {
            flex: 1;
            padding-top: var(--spacing-xs);
        }

        .welcome-title {
            font-size: 28px;  /* ä» 26px å¢å¤§ */
            font-weight: 800;  /* ä» 700 å¢åŠ  */
            line-height: 1.2;
            letter-spacing: -0.03em;  /* ä» -0.01em å¢å¼º */
            margin-bottom: var(--spacing-sm);
            /* âœ… æ¸å˜æ–‡å­—æ•ˆæœ */
            background: linear-gradient(135deg, #3E3848 0%, #5E5670 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-subtitle {
            font-size: 15px;
            line-height: 1.7;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-md);
            font-weight: 500;
            position: relative;
            padding-left: 12px;  /* âœ… ä¸ºè£…é¥°æ¡ç•™ç©ºé—´ */
            max-width: 280px;
        }

        /* âœ… æ·»åŠ è£…é¥°æ€§ç«–çº¿ */
        .welcome-subtitle::before {
            content: '';
            position: absolute;
            left: 0;
            top: 4px;
            bottom: 4px;
            width: 3px;
            background: var(--gradient-gentle);
            border-radius: 2px;
        }

        /* âœ… ä¼˜åŒ–6: æç¤ºè¯æŒ‰é’® - é™ä½è§†è§‰æƒé‡ */
        .prompt-suggestions {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            width: calc(100% - 116px);  /* å‡å»å·¦è¾¹è·ï¼Œé¿å…è¶…å‡ºå®¹å™¨ */
            margin-left: 116px;
        }

        .prompt-button {
            padding: 10px 16px;  /* ä» 12px 20px å‡å° */
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid var(--bubble-border);  /* ä» 1.5px å‡å° */
            border-radius: 16px;  /* ä» 18px å‡å° */
            font-family: var(--font-main);
            font-size: 13px;  /* ä» 14px å‡å° */
            color: var(--text-secondary);  /* âœ… ä½¿ç”¨æ¬¡è¦é¢œè‰² */
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            box-shadow: var(--shadow-soft);
            -webkit-tap-highlight-color: transparent;
            font-weight: 500;  /* ä» 600 é™ä½ */
            width: 100%;  /* ç¡®ä¿æŒ‰é’®å®½åº¦è‡ªé€‚åº” */
            box-sizing: border-box;  /* åŒ…å« padding åœ¨å®½åº¦è®¡ç®—ä¸­ */
            word-wrap: break-word;  /* å…è®¸é•¿æ–‡æœ¬æ¢è¡Œ */
            overflow-wrap: break-word;  /* å…¼å®¹æ€§æ›´å¥½çš„æ¢è¡Œ */
        }

        .prompt-button:hover {
            border-color: var(--accent-primary);
            transform: translateY(-1px);  /* ä» -2px å‡å° */
            box-shadow: var(--shadow-medium);
            font-weight: 600;  /* âœ… hover æ—¶åŠ ç²— */
            color: var(--text-primary);
        }

        .prompt-button:active {
            transform: translateY(0);
        }

        /* âœ… ä¼˜åŒ–7: æ¶ˆæ¯æ°”æ³¡ - å¢å¼ºå¯è¯»æ€§ */
        .message {
            display: flex;
            gap: var(--spacing-sm);
            max-width: 86%;
            margin-bottom: var(--spacing-md);
            animation: messageIn 0.4s ease-out;
        }

        @keyframes messageIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message.ai {
            align-self: flex-start;
        }

        .avatar-small {
            width: 32px;
            height: 32px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 16px;
            font-family: var(--font-emoji);  /* ç¡®ä¿ä½¿ç”¨ emoji å­—ä½“ */
            box-shadow: var(--shadow-soft);
        }

        .avatar-small .emoji {
            font-family: var(--font-emoji);
            font-style: normal;
        }

        .message.ai .avatar-small {
            background: var(--gradient-gentle);
        }

        .message.user .avatar-small {
            background: var(--bubble-user);
        }

        .bubble {
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: 16px;  /* ä» 20px å‡å°ï¼Œæ›´å¹³è¡¡ */
            font-size: 15px;
            line-height: 1.7;
            word-wrap: break-word;
            position: relative;
        }

        .message.ai .bubble {
            background: var(--bubble-ai);
            color: var(--text-primary);
            border: 1.5px solid var(--bubble-border-strong);  /* âœ… åŠ æ·±è¾¹æ¡† */
            border-bottom-left-radius: 6px;
            /* âœ… åŒå±‚é˜´å½±å¢åŠ æ·±åº¦ */
            box-shadow:
                0 2px 8px rgba(74, 67, 88, 0.06),
                0 8px 24px rgba(74, 67, 88, 0.04);
        }

        .message.user .bubble {
            /* âœ… å¾®å¦™æ¸å˜ */
            background: linear-gradient(135deg, #E8D5E0 0%, #DCC8E0 100%);
            border-bottom-right-radius: 6px;
            /* âœ… åŒå±‚é˜´å½± */
            box-shadow:
                0 4px 12px rgba(74, 67, 88, 0.08),
                0 8px 28px rgba(74, 67, 88, 0.06);
        }

        .message-time {
            font-size: 11px;
            margin-top: var(--spacing-xs);
            opacity: 0.6;
            font-weight: 600;
            font-family: var(--font-main);
        }

        .message.ai .message-time {
            color: var(--text-tertiary);
            padding-left: var(--spacing-xs);
        }

        .message.user .message-time {
            color: var(--text-secondary);
            padding-right: var(--spacing-xs);
            text-align: right;
        }

        /* âœ… ä¼˜åŒ–9: æ‰“å­—æŒ‡ç¤ºå™¨ - æ›´è‡ªç„¶çš„èŠ‚å¥ */
        .typing-indicator {
            display: flex;
            gap: var(--spacing-sm);
        }

        .typing-dots {
            display: flex;
            gap: 6px;
            padding: var(--spacing-md) var(--spacing-lg);
            background: var(--bubble-ai);
            border: 1.5px solid var(--bubble-border-strong);
            border-radius: 16px;
            border-bottom-left-radius: 6px;
            box-shadow: var(--shadow-soft);
        }

        .dot {
            width: 7px;
            height: 7px;
            background: var(--gradient-gentle);
            border-radius: 50%;
            animation: typingBounce 1.4s ease-in-out infinite;
        }

        /* âœ… ä¸åŒæ—¶é•¿ï¼Œæ›´è‡ªç„¶çš„èŠ‚å¥ */
        .dot:nth-child(1) {
            animation-delay: 0s;
            animation-duration: 1.3s;
        }
        .dot:nth-child(2) {
            animation-delay: 0.15s;  /* ä» 0.2s ç¼©çŸ­ */
            animation-duration: 1.5s;
        }
        .dot:nth-child(3) {
            animation-delay: 0.3s;  /* ä» 0.4s ç¼©çŸ­ */
            animation-duration: 1.4s;
        }

        @keyframes typingBounce {
            0%, 60%, 100% {
                transform: translateY(0) scale(1);
                opacity: 0.6;
            }
            30% {
                transform: translateY(-8px) scale(1.1);  /* âœ… æ·»åŠ ç¼©æ”¾ */
                opacity: 1;
            }
        }

        /* è¾“å…¥åŒºåŸŸ - âœ… ä¼˜åŒ–äº¤äº’åé¦ˆ */
        .input-area {
            padding: var(--spacing-md);
            padding-bottom: max(var(--spacing-md), env(safe-area-inset-bottom));
            background: rgba(254, 249, 245, 0.98);  /* ä» 0.95 æé«˜ */
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-top: 1.5px solid var(--bubble-border);  /* ä» 1px åŠ æ·± */
            display: flex;
            gap: var(--spacing-sm);
            align-items: flex-end;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            border: 1.5px solid var(--bubble-border);
            transition: all 0.3s ease;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }

        /* âœ… å¢å¼ºå¤–å‘å…‰ */
        .input-wrapper:focus-within {
            border-color: var(--accent-primary);
            box-shadow:
                0 0 0 3px rgba(212, 184, 232, 0.25),  /* ä» 0.15 å¢å¼º */
                0 4px 12px rgba(212, 184, 232, 0.15);  /* âœ… æ·»åŠ é¢å¤–é˜´å½± */
            transform: translateY(-1px);  /* âœ… å¾®å¦™ä¸Šç§» */
        }

        #messageInput {
            width: 100%;
            padding: var(--spacing-md) var(--spacing-lg);
            border: none;
            background: transparent;
            font-family: var(--font-main);
            font-size: 15px;
            color: var(--text-primary);
            outline: none;
            resize: none;
            max-height: 100px;
            line-height: 1.6;
            font-weight: 500;
        }

        /* âœ… åŠ æ·± placeholder é¢œè‰² */
        #messageInput::placeholder {
            color: #9A8FA0;  /* ä» #A89FA8 åŠ æ·± */
        }

        .send-button {
            width: 48px;
            height: 48px;
            border-radius: 20px;
            background: var(--gradient-gentle);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-soft);
            flex-shrink: 0;
            -webkit-tap-highlight-color: transparent;
        }

        .send-button:active:not(:disabled) {
            transform: scale(0.96);
        }

        /* âœ… æ”¹è¿›ç¦ç”¨çŠ¶æ€ */
        .send-button:disabled {
            opacity: 0.3;
            background: var(--bg-tertiary);  /* âœ… æ”¹å˜èƒŒæ™¯è‰² */
            cursor: not-allowed;
            transform: none;
            box-shadow: none;  /* âœ… ç§»é™¤é˜´å½± */
        }

        .send-button svg {
            width: 20px;
            height: 20px;
            fill: none;
            stroke: var(--text-primary);
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* æ»šåŠ¨æ¡ */
        .messages-container::-webkit-scrollbar {
            width: 4px;
        }

        .messages-container::-webkit-scrollbar-track {
            background: transparent;
        }

        .messages-container::-webkit-scrollbar-thumb {
            background: rgba(168, 159, 168, 0.3);
            border-radius: 4px;
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 420px) {
            .prompt-suggestions {
                margin-left: 0;  /* åœ¨å°å±å¹•ä¸Šç§»é™¤å·¦è¾¹è· */
                width: 100%;  /* æ¢å¤100%å®½åº¦ */
            }
        }

        @media (max-width: 380px) {
            .prompt-suggestions {
                margin-left: 0;
                width: 100%;  /* æ˜ç¡®è®¾ç½®ä¸º100% */
            }

            .welcome-avatar-container {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .welcome-text {
                padding-top: 0;
            }

            .welcome-subtitle {
                padding-left: 0;
            }

            .welcome-subtitle::before {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨è™šæ‹Ÿå½¢è±¡æ  -->
    <div class="top-bar">
        <div class="avatar-container" id="avatarContainer" onclick="toggleAvatarSelector()">
            <div class="avatar-small-top" id="topAvatar">
                <span id="topAvatarEmoji" class="emoji">ğŸŒ¸</span>
            </div>
            <div class="status-indicator"></div>
            <div class="avatar-info">
                <div class="avatar-name" id="avatarName">å°æ¨±</div>
                <div class="avatar-status" id="avatarStatus">åœ¨çº¿</div>
            </div>
        </div>
    </div>

    <!-- å¤´åƒé€‰æ‹©å™¨ -->
    <div class="avatar-selector" id="avatarSelector">
        <div class="avatar-option" onclick="selectAvatar('ğŸŒ¸', 'å°æ¨±')">
            <div class="avatar-preview" style="background: linear-gradient(135deg, #C5E8D0, #FFD4C2);">ğŸŒ¸</div>
            <span>å°æ¨±</span>
        </div>
        <div class="avatar-option" onclick="selectAvatar('ğŸ±', 'å’ªå’ª')">
            <div class="avatar-preview" style="background: linear-gradient(135deg, #FFD4C2, #E2D4F0);">ğŸ±</div>
            <span>å’ªå’ª</span>
        </div>
        <div class="avatar-option" onclick="selectAvatar('ğŸ¤–', 'å°æ™º')">
            <div class="avatar-preview" style="background: linear-gradient(135deg, #E2D4F0, #C5E8D0);">ğŸ¤–</div>
            <span>å°æ™º</span>
        </div>
        <div class="avatar-option" onclick="selectAvatar('ğŸ¦Š', 'é˜¿ç‹')">
            <div class="avatar-preview" style="background: linear-gradient(135deg, #FFE5B4, #FFD4C2);">ğŸ¦Š</div>
            <span>é˜¿ç‹</span>
        </div>
    </div>

    <div class="app-container">
        <!-- æ¶ˆæ¯å®¹å™¨ -->
        <div class="messages-container" id="messagesContainer">
            <!-- âœ… ç©ºçŠ¶æ€è£…é¥° -->
            <div class="empty-state-decoration" id="emptyStateDecoration">
                <div class="floating-icon" style="top: 15%; left: 8%; animation-delay: 0s;"><span class="emoji">âœ¨</span></div>
                <div class="floating-icon" style="top: 35%; right: 12%; animation-delay: 1s;"><span class="emoji">ğŸ’­</span></div>
                <div class="floating-icon" style="bottom: 25%; left: 15%; animation-delay: 2s;"><span class="emoji">ğŸŒ±</span></div>
            </div>

            <div class="robot-welcome" id="robotWelcome">
                <div class="welcome-avatar-container">
                    <!-- å¤§å‹è™šæ‹Ÿå½¢è±¡ -->
                    <div class="robot-avatar-large" id="largeAvatar">
                        <div class="avatar-3d-container">
                            <!-- 3Dæ¨¡å‹å®¹å™¨ï¼ˆé¢„ç•™ï¼‰ -->
                            <!-- <img class="avatar-3d-model" src="./assets/avatar-3d.gif" alt="3D Avatar"> -->
                            <!-- <div class="avatar-3d-model" id="threejs-container"></div> -->

                            <!-- å½“å‰å ä½ç¬¦ -->
                            <span class="avatar-placeholder emoji" id="largeAvatarEmoji">ğŸŒ¸</span>
                        </div>
                    </div>

                    <!-- æ¬¢è¿æ–‡å­— -->
                    <div class="welcome-text">
                        <div class="welcome-title" id="welcomeTitle">å—¨ï¼Œæˆ‘æ˜¯å°æ¨±</div>
                        <div class="welcome-subtitle">å¾ˆé«˜å…´è§åˆ°ä½ ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ</div>
                    </div>
                </div>

                <!-- æç¤ºè¯æŒ‰é’® -->
                <div class="prompt-suggestions">
                    <button class="prompt-button" onclick="sendPrompt('ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±')">
                        ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±
                    </button>
                    <button class="prompt-button" onclick="sendPrompt('ä½ èƒ½å¸®æˆ‘åšäº›ä»€ä¹ˆï¼Ÿ')">
                        ä½ èƒ½å¸®æˆ‘åšäº›ä»€ä¹ˆï¼Ÿ
                    </button>
                    <button class="prompt-button" onclick="sendPrompt('ç»™æˆ‘ä¸€ä¸ªåˆ›æ„ç‚¹å­')">
                        ç»™æˆ‘ä¸€ä¸ªåˆ›æ„ç‚¹å­
                    </button>
                </div>
            </div>
        </div>

        <!-- è¾“å…¥åŒºåŸŸ -->
        <div class="input-area">
            <div class="input-wrapper">
                <textarea
                    id="messageInput"
                    placeholder="è¾“å…¥æ¶ˆæ¯..."
                    rows="1"
                    oninput="autoResize(this); updateSendButton();"
                    onkeydown="handleKeyDown(event)"
                ></textarea>
            </div>
            <button class="send-button" id="sendButton" onclick="sendMessage()" disabled>
                <svg viewBox="0 0 24 24">
                    <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // ===== è™šæ‹Ÿå½¢è±¡é…ç½®ç³»ç»Ÿ =====

        let currentAvatar = {
            emoji: 'ğŸŒ¸',
            name: 'å°æ¨±',
            status: 'åœ¨çº¿'
        };

        const avatarDatabase = {
            'å°æ¨±': {
                emoji: 'ğŸŒ¸',
                name: 'å°æ¨±',
                status: 'åœ¨çº¿',
                personality: 'æ¸©æŸ”',
                gradient: 'linear-gradient(135deg, #C5E8D0, #DDE8D8, #FFE5D8, #FFD4C2)',
            },
            'å’ªå’ª': {
                emoji: 'ğŸ±',
                name: 'å’ªå’ª',
                status: 'åœ¨çº¿',
                personality: 'è°ƒçš®',
                gradient: 'linear-gradient(135deg, #FFD4C2, #F5E0E0, #E8D8F0, #E2D4F0)'
            },
            'å°æ™º': {
                emoji: 'ğŸ¤–',
                name: 'å°æ™º',
                status: 'åœ¨çº¿',
                personality: 'ç†æ€§',
                gradient: 'linear-gradient(135deg, #E2D4F0, #D8E8F0, #C5E8D8, #C5E8D0)'
            },
            'é˜¿ç‹': {
                emoji: 'ğŸ¦Š',
                name: 'é˜¿ç‹',
                status: 'åœ¨çº¿',
                personality: 'æœºæ™º',
                gradient: 'linear-gradient(135deg, #FFE5B4, #FFE0D0, #FFD8C8, #FFD4C2)'
            }
        };

        function toggleAvatarSelector() {
            const selector = document.getElementById('avatarSelector');
            const container = document.getElementById('avatarContainer');

            selector.classList.toggle('active');
            container.classList.toggle('expanded');
        }

        function selectAvatar(emoji, name) {
            currentAvatar = avatarDatabase[name];

            document.getElementById('topAvatarEmoji').textContent = emoji;
            document.getElementById('avatarName').textContent = name;
            document.getElementById('largeAvatarEmoji').textContent = emoji;
            document.getElementById('welcomeTitle').textContent = `å—¨ï¼Œæˆ‘æ˜¯${name}`;

            const gradient = currentAvatar.gradient;
            document.querySelectorAll('.avatar-small-top, .robot-avatar-large').forEach(el => {
                el.style.background = gradient;
            });

            toggleAvatarSelector();
            localStorage.setItem('selectedAvatar', JSON.stringify(currentAvatar));
        }

        document.addEventListener('click', function(event) {
            const selector = document.getElementById('avatarSelector');
            const avatarContainer = document.querySelector('.avatar-container');

            if (!selector.contains(event.target) && !avatarContainer.contains(event.target)) {
                selector.classList.remove('active');
                document.getElementById('avatarContainer').classList.remove('expanded');
            }
        });

        function loadSavedAvatar() {
            const saved = localStorage.getItem('selectedAvatar');
            if (saved) {
                const avatar = JSON.parse(saved);
                selectAvatar(avatar.emoji, avatar.name);
            }
        }

        window.addEventListener('load', loadSavedAvatar);

        // ===== èŠå¤©åŠŸèƒ½ =====

        const mockResponses = [
            "å¾ˆå¥½çš„é—®é¢˜ï¼è®©æˆ‘æ¥å¸®ä½ è§£ç­”...",
            "æˆ‘ç†è§£ä½ çš„éœ€æ±‚ã€‚è¿™é‡Œæœ‰ä¸€äº›å»ºè®®ï¼š\n\n1. é¦–å…ˆè¦æ˜ç¡®ç›®æ ‡\n2. åˆ¶å®šè¯¦ç»†çš„è®¡åˆ’\n3. é€æ­¥å®æ–½å¹¶æŒç»­ä¼˜åŒ–",
            "æœ‰è¶£çš„è¯é¢˜ï¼ä»æˆ‘çš„è§’åº¦æ¥çœ‹ï¼Œå…³é”®åœ¨äº...",
            "è®©æˆ‘æƒ³æƒ³...æ ¹æ®æˆ‘çš„åˆ†æï¼Œæˆ‘å»ºè®®...",
            "æ„Ÿè°¢ä½ çš„æé—®ï¼è¿™é‡Œæœ‰ä¸€äº›ç›¸å…³ä¿¡æ¯...",
            "è¿™ç¡®å®å€¼å¾—æ·±å…¥æ¢è®¨ã€‚æˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥ç†è§£...",
            "è¿™ä¸ªæƒ³æ³•å¾ˆæœ‰åˆ›æ„ï¼æˆ‘è¿˜å¯ä»¥æä¾›ä¸€äº›æ‰©å±•å»ºè®®...",
            "è®©æˆ‘ä¸ºä½ è¯¦ç»†åˆ†æä¸€ä¸‹è¿™ä¸ªé—®é¢˜..."
        ];

        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 100) + 'px';
        }

        function updateSendButton() {
            const input = document.getElementById('messageInput');
            const button = document.getElementById('sendButton');
            button.disabled = !input.value.trim();
        }

        function handleKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function sendPrompt(text) {
            document.getElementById('messageInput').value = text;
            updateSendButton();
            sendMessage();
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();

            if (!message) return;

            const welcome = document.getElementById('robotWelcome');
            const decoration = document.getElementById('emptyStateDecoration');
            if (welcome) {
                welcome.style.display = 'none';
            }
            if (decoration) {
                decoration.style.display = 'none';
            }

            addMessage(message, 'user');

            input.value = '';
            input.style.height = 'auto';
            updateSendButton();

            showTypingIndicator();

            setTimeout(() => {
                hideTypingIndicator();
                const randomResponse = mockResponses[Math.floor(Math.random() * mockResponses.length)];
                addMessage(randomResponse, 'ai');
            }, 1000 + Math.random() * 1000);
        }

        function addMessage(text, type) {
            const container = document.getElementById('messagesContainer');
            const time = new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;

            const avatar = type === 'ai' ? currentAvatar.emoji : 'ğŸŒ¿';

            messageDiv.innerHTML = `
                <div class="avatar-small"><span class="emoji">${avatar}</span></div>
                <div>
                    <div class="bubble">${escapeHtml(text).replace(/\n/g, '<br>')}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;

            container.appendChild(messageDiv);
            scrollToBottom();
        }

        function showTypingIndicator() {
            const container = document.getElementById('messagesContainer');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message ai';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="avatar-small"><span class="emoji">${currentAvatar.emoji}</span></div>
                <div class="typing-dots">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
            `;
            container.appendChild(typingDiv);
            scrollToBottom();
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function scrollToBottom() {
            const container = document.getElementById('messagesContainer');
            container.scrollTop = container.scrollHeight;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        window.onload = () => {
            document.getElementById('messageInput').focus();
        };
    </script>
</body>
</html>
