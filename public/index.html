<!--
AI Chatbot - 前端界面

项目定位：轻量级AI聊天机器人（非企业级应用）
技术栈：HTML5 + CSS3 + 原生JavaScript
架构：单文件应用，localStorage存储

核心特性：
- 双AI模型支持（GLM-4、DeepSeek）
- 流式响应（SSE - Server-Sent Events）
- 多轮对话上下文记忆
- 虚拟形象切换

重要约定：
- 不要建议引入前端框架（Vue、React）
- 不要重写SSE为WebSocket
- public/config.js 是自动生成的，不要手动编辑
- 保持单文件结构（便于快速迭代）

开发前必读：
- docs/ARCHITECTURE.md - 架构设计和技术栈选择理由
- docs/CONTRIBUTING.md - 开发规范和常见任务指南

@version 2.0.0
-->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI 智能助手 - 完全优化版</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700;800&family=Caveat:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- 前端配置文件 -->
    <script src="/config.js"></script>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <!-- 顶部虚拟形象栏 -->
    <div class="top-bar">
        <div class="avatar-container" id="avatarContainer" onclick="toggleAvatarSelector()">
            <div class="avatar-small-top" id="topAvatar">
                <span id="topAvatarEmoji" class="emoji">🌸</span>
            </div>
            <div class="status-indicator"></div>
            <div class="avatar-info">
                <div class="avatar-name" id="avatarName">小樱</div>
                <div class="avatar-status" id="avatarStatus">在线</div>
            </div>
        </div>
    </div>

    <!-- 头像选择器 -->
    <div class="avatar-selector" id="avatarSelector">
        <div class="avatar-option" onclick="selectAvatar('🌸', '小樱')">
            <div class="avatar-preview" style="background: linear-gradient(135deg, #C5E8D0, #FFD4C2);">🌸</div>
            <span>小樱</span>
        </div>
        <div class="avatar-option" onclick="selectAvatar('🐱', '咪咪')">
            <div class="avatar-preview" style="background: linear-gradient(135deg, #FFD4C2, #E2D4F0);">🐱</div>
            <span>咪咪</span>
        </div>
        <div class="avatar-option" onclick="selectAvatar('🤖', '小智')">
            <div class="avatar-preview" style="background: linear-gradient(135deg, #E2D4F0, #C5E8D0);">🤖</div>
            <span>小智</span>
        </div>
        <div class="avatar-option" onclick="selectAvatar('🦊', '阿狐')">
            <div class="avatar-preview" style="background: linear-gradient(135deg, #FFE5B4, #FFD4C2);">🦊</div>
            <span>阿狐</span>
        </div>
    </div>

    <div class="app-container">
        <!-- 消息容器 -->
        <div class="messages-container" id="messagesContainer">
            <!-- ✅ 空状态装饰 -->
            <div class="empty-state-decoration" id="emptyStateDecoration">
                <div class="floating-icon" style="top: 15%; left: 8%; animation-delay: 0s;"><span class="emoji">✨</span></div>
                <div class="floating-icon" style="top: 35%; right: 12%; animation-delay: 1s;"><span class="emoji">💭</span></div>
                <div class="floating-icon" style="bottom: 25%; left: 15%; animation-delay: 2s;"><span class="emoji">🌱</span></div>
            </div>

            <div class="robot-welcome" id="robotWelcome">
                <div class="welcome-avatar-container">
                    <!-- 大型虚拟形象 -->
                    <div class="robot-avatar-large" id="largeAvatar">
                        <div class="avatar-3d-container">
                            <!-- 3D模型容器（预留） -->
                            <!-- <img class="avatar-3d-model" src="./assets/avatar-3d.gif" alt="3D Avatar"> -->
                            <!-- <div class="avatar-3d-model" id="threejs-container"></div> -->

                            <!-- 当前占位符 -->
                            <span class="avatar-placeholder emoji" id="largeAvatarEmoji">🌸</span>
                        </div>
                    </div>

                    <!-- 欢迎文字 -->
                    <div class="welcome-text">
                        <div class="welcome-title" id="welcomeTitle">嗨，我是小樱</div>
                        <div class="welcome-subtitle">很高兴见到你！有什么我可以帮助你的吗？</div>
                    </div>
                </div>

                <!-- 快速开始按钮（阶段 1 第一版） -->
                <div class="prompt-suggestions">
                    <button class="prompt-button" onclick="quickStart('summarize')">
                        📝 帮我总结一篇文章
                    </button>
                    <button class="prompt-button" onclick="quickStart('extract')">
                        📊 提取文章关键信息
                    </button>
                    <button class="prompt-button" onclick="quickStart('ideas')">
                        💡 给我5个创意点子
                    </button>
                </div>
            </div>
        </div>

        <!-- 输入区域 -->
        <div class="input-area">
            <div class="input-wrapper">
                <textarea
                    id="messageInput"
                    placeholder="输入消息..."
                    rows="1"
                    oninput="autoResize(this); updateSendButton();"
                    onkeydown="handleKeyDown(event)"
                ></textarea>
            </div>
            <button class="send-button" id="sendButton" onclick="sendMessage()" disabled>
                <svg viewBox="0 0 24 24">
                    <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                </svg>
            </button>
        </div>
    </div>

    <script src="/app.js"></script>
</body>
</html>
